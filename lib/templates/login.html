{{#extend "title"}}
  Login
{{/extend}}

{{#extend "css"}}
  <link rel="stylesheet" href="/assets/css/patternLock.css">
  <link rel="stylesheet" href="/assets/css/login.css">
{{/extend}}

{{#extend "js"}}
  app.controller("LoginControls", function($scope, $http, $window) {
    $scope.opened = false;
    $scope.querying = false;
    $scope.login = {
      pattern: ""
    };

    $scope.toggleOpener = function() {
      $scope.opened = !$scope.opened;
    };

    var lock = new PatternLock('#patternHolder',{matrix:[3,3], onDraw: function(pattern) {
      $scope.querying = true;
      $scope.login.pattern = pattern;
      $scope.$apply();
      //$scope.logNow(); // TODO
    }});
  });
{{/extend}}

<div flex layout="row" layout-align="center center" ng-controller="LoginControls">
    <div id="login-card-folder">
        <md-card id="login-card-1" md-whiteframe="10" ng-class="{ 'opened': (opened) }"
                 md-colors="{background: '{{md-primary}}-900'}"
                 layout="column" layout-margin>
            <div class="opener">
                <md-button md-no-ink ng-click="toggleOpener()">
                    RESET PASSWORD
                </md-button>
            </div>
            <div flex layout="column" layout-align="end center" layout-margin>
                <md-input-container md-no-float class="md-block">
                    <label>Myfox password</label>
                    <input ng-model="myfox.password" type="password">
                </md-input-container>
                <p>
                    Enter the Myfox account information,
                    then draw a pattern to save.
                </p>
                < spinner >
            </div>
        </md-card>
    </div>

    <div class="login-deco-folder" ng-class="{ 'opened': (opened) }">
        <md-card id="login-card-4" md-whiteframe="12"
                 md-colors="{background: '{{md-primary}}-500'}"
                 layout="row" layout-margin layout-padding></md-card>
    </div>
    <div class="login-deco-folder" ng-class="{ 'opened': (opened) }">
        <md-card id="login-card-3" md-whiteframe="11"
                 md-colors="{background: '{{md-primary}}-300'}"
                 layout="row" layout-margin layout-padding></md-card>
    </div>
    <md-card id="login-card-2" md-whiteframe="17" ng-class="{ 'opened': (opened) }"
             md-colors="{background: '{{md-primary}}-100'}"
             layout="row" layout-align="center center">
        <div id="patternHolder" layout="row" layout-align="center"> </div>
    </md-card>
</div>
