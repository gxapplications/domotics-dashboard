{{#extend "title"}}
  {{page.name}}
{{/extend}}

{{#extend "css"}}
  <link rel="stylesheet" href="/assets/css/gx-grid-stack.css">
  <link rel="stylesheet" href="/assets/css/fab-speed-dial-circle.css">
  <link rel="stylesheet" href="/assets/css/page.css">
{{/extend}}

{{#extend "js"}}
  // Initialization vars, from template engine to Angular app scope
  var initStates = {{tojson states}}
  var initGridPositions = {{{page.positions}}}
  var initGridLayout = {{page.layout}}
  var gridComponentLoaderUrl = '/{{page.slug}}/component'
  var gridPageUpdaterUrl = '/{{page.slug}}'
{{/extend}}

{{#extend "scripts"}}
  <script src="/assets/js/jquery-ui.min.js"></script>
  <script src="/assets/js/jquery.ui.touch-punch.min.js"></script>
  <script src="/assets/js/gridList.js"></script>
  <script src="/assets/js/jquery.gridList.js"></script>
  <script src="/assets/js/gx-grid-stack.js"></script>
  <script src="/assets/js/page.js"></script>
{{/extend}}

<div layout="column" flex ng-controller="PageControls" class="page-controller" ng-class="{'editing': (edition.active)}">
    <md-toolbar ng-if="true" class="md-whiteframe-6dp page-toolbar-static" ng-class="{'hidden': (!edition.active)}">
        <div class="md-toolbar-tools">
            <h3>
                <span>{{page.name}} (editing) TODO 6</span>
            </h3>
            <span flex></span>
            <md-button class="md-fab md-hue-1" aria-label="Close edit mode" ng-click="edition.close()">
                <md-icon class="material-icons" aria-label="Finish Edition">done_all</md-icon>
            </md-button>
        </div>
    </md-toolbar>

    <div layout="column" flex class="page-toolbar-shrinker">
        <md-toolbar md-scroll-shrink ng-if="true"
                    class="md-whiteframe-6dp" ng-class="{'hidden': (edition.active)}">
            <div class="md-toolbar-tools">
                <h3>
                    <span>{{page.name}}</span>
                </h3>
                <span flex></span>
                <md-button class="md-fab md-hue-2" aria-label="Open edit mode" ng-click="edition.open()">
		            <md-icon class="material-icons" aria-label="Edit">mode_edit</md-icon>
                </md-button>
            </div>
        </md-toolbar>

        <md-content layout="column" flex class="md-whiteframe-18dp page-content">
            <div>
                <ul id="grid" class="grid">
                    <li class="position-highlight">
                        <div class="inner md-whiteframe-1dp"></div>
                    </li>
                    <li class="position-card">
                        <md-card class="md-whiteframe-6dp inner">
                            <div flex layout="row" layout-align="center center">
                                <md-progress-circular md-diameter="64" md-mode="indeterminate" class="md-hue-3"></md-progress-circular>
                            </div>
                        </md-card>
                    </li>
                </ul>
            </div>
        </md-content>
    </div>

    <md-content layout="column" layout-align="left center" class="page-editor left-bar" ng-class="{'editing': (edition.active)}">
        <md-button class="md-fab" aria-label="Add component type 1" ng-click="edition.addComponent(1, 1, 1)">
            <md-icon class="material-icons" aria-label="Add type 1">add</md-icon>
        </md-button>
        TODO !5
    </md-content>
    <md-content layout="column" layout-align="right center" class="page-editor right-bar" ng-class="{'editing': (edition.active)}">
        <md-button class="md-fab" aria-label="Add component type 1" ng-click="edition.addComponent(1, 1, 1)">
            <md-icon class="material-icons" aria-label="Add type 1">add</md-icon>
        </md-button>
        TODO !5
    </md-content>

</div>

<div style="visibility: hidden">
    <div class="md-dialog-container" id="componentSizes">
        <md-dialog layout-padding>
          <h2>Pre-Rendered Dialog</h2>
          <p>AAAAAHHH !</p>

          <md-button ng-click="answer('not useful')">
            Not Useful
          </md-button>
          <md-button ng-click="answer('useful')">
            Useful
          </md-button>

        </md-dialog>
    </div>
</div>

