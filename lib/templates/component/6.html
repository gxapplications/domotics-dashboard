<div layout="row" layout-padding layout-align="space-between stretch" style="min-height:15rem;">
    <div id="double-knob-{{component.id}}" flex="50"
         class="ratio-content" style="max-height:20em;"
         title="{{component.title}}"></div>

    <div flex style="padding-left:1.2rem;" hide show-gt-md>
        TODO !3: Data (temp et luminosité) depuis un capteur ID. OPTIONNEL
        <br/><br/>
        TODO !4: bouton "forcer pendant 2h", couplé au widget en batons (planning, avec possibilité de forcer à confort 2h)
    </div>
</div>

<div flex layout-fill style="padding-top:1.1em;">
    <div id="planer-{{component.id}}" style="width:100%; height:3em;"></div>
</div>

<div flex style="padding-top:1.1em;">
    TODO !4: Travailler sur le planer en barrettes. -> module JQuery. Canvas ?
</div>

{{#extend "settingsForm"}}
  <md-dialog-content style="min-width:700px;max-width:800px;max-height:810px;">

      <form name="componentForm" layout="column" flex layout-fill>
          <section>
              <md-subheader class="md-accent">Heating dashboard - On/Off piloted</md-subheader>
              <md-list layout="column" layout-padding>
                  <md-list-item layout="row" layout-align="space-between stretch">
                      <md-input-container flex="80">
                          <label>Title</label>
                          <input ng-model="component.configuration.title" required name="component_title" md-maxlength="64" />
                      </md-input-container>
                      <md-select placeholder="Icon" ng-model="component.configuration.icon" style="margin-left: 1rem;" flex="20">
                          <md-option ng-value="">None</md-option>
                          <md-option ng-value="icon" ng-repeat="icon in edition.tools.icons">
                            <md-icon class="material-icons" aria-label="{{ng-open}}icon{{ng-close}}" style="color: #64DD17;">{{ng-open}}icon{{ng-close}}</md-icon>
                          </md-option>
                      </md-select>
                  </md-list-item>

              </md-list>
          </section>
          <md-divider></md-divider>
      </form>
  </md-dialog-content>
  <md-dialog-actions layout="row">
    <span flex></span>
    <md-button ng-click="cancelConfig()"><md-icon aria-label="block" class="material-icons md-14">block</md-icon> Cancel</md-button>
    <md-button class="md-primary md-raised" ng-click="saveConfig()" md-autofocus><md-icon aria-label="done" class="material-icons md-14">done</md-icon> Save</md-button>
  </md-dialog-actions>
{{/extend}}

<script>
  {{#extend "controllerScript"}}
    // TODO !1: pas scalée, il faut l'initialiser seulement quand affichage prêt !
    $scope.doubleKnob = $('div#double-knob-{{component.id}}').temperatureLoader({
		minValue: 17,
		maxValue: 22,
		title: 'Test title',
		scaleOffset: 15.0,
		scaleAmplitude: 15.0,
		precision: 0
		/*onMinUpdate: onMinUpdate,
		onMaxUpdate: onMaxUpdate,
		onCenterClick: onCenterClick,
		componentData: component*/
	});
    $scope.edition.tools.addAutoRescaler($scope.doubleKnob.resize)

    $('div#planer-{{component.id}}').autoSizedPlaner({
      // TODO !4
	});
  {{/extend}}

  {{#extend "settingsScript"}}
    // TODO !2
  {{/extend}}
</script>
