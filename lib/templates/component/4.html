<h2 style="text-overflow: ellipsis; white-space: normal; margin-top: 0.7rem; margin-bottom: 0.3rem;">
    <md-icon aria-label="custom" class="material-icons button-icon-48">{{parsejson component.configuration 'icon'}}</md-icon>
    {{parsejson component.configuration 'title' 'Settings needed'}}
</h2>
<div layout="row" style="margin: 0 0.5rem 0.3rem 0.5rem;" flex>
    <md-button class="md-raised md-primary component-button"
               style="border-top-right-radius: 0; border-bottom-right-radius: 0;"
               ng-disabled="isDisabled(component.configuration.domotic, states.macro.c_{{component.id}}.state, processingState)"
               ng-class="{
                   'md-warn': processingState === 'error',
                   'md-hue-1': activationState === 'on' && (states.macro.c_{{component.id}}.state === 'progress' || states.macro.c_{{component.id}}.state === 'delayed')
               }"
               flex id="component-button-{{component.id}}-on" ng-click="play('on')">
        <md-icon aria-label="state" style="color: {{ng-open}}activationState === 'on' ? '#00C853' : '#2E7D32'{{ng-close}}"
                 class="material-icons button-icon-48">{{ng-open}}activationState === 'on' ? 'star' : 'star_border'{{ng-close}}</md-icon>
        <md-icon aria-label="mode" class="material-icons button-icon-48">brightness_high</md-icon>
    </md-button>
    <md-button class="md-raised md-primary component-button"
               style="border-radius: 0;"
               ng-disabled="isDisabled(component.configuration.domotic, states.macro.c_{{component.id}}.state, processingState)"
               ng-class="{
                   'md-warn': processingState === 'error',
                   'md-hue-1': activationState === 'eco' && (states.macro.c_{{component.id}}.state === 'progress' || states.macro.c_{{component.id}}.state === 'delayed')
               }"
               flex id="component-button-{{component.id}}-eco" ng-click="play('eco')">
        <md-icon aria-label="state" style="color: {{ng-open}}activationState === 'eco' ? '#FFAB00' : '#FF6F00'{{ng-close}}"
                 class="material-icons button-icon-48">{{ng-open}}activationState === 'eco' ? 'star' : 'star_border'{{ng-close}}</md-icon>
        <md-icon aria-label="mode" class="material-icons button-icon-48">brightness_medium</md-icon>
    </md-button>
    <md-button class="md-raised md-primary component-button"
               style="border-radius: 0;"
               ng-disabled="isDisabled(component.configuration.domotic, states.macro.c_{{component.id}}.state, processingState)"
               ng-class="{
                   'md-warn': processingState === 'error',
                   'md-hue-1': activationState === 'frost' && (states.macro.c_{{component.id}}.state === 'progress' || states.macro.c_{{component.id}}.state === 'delayed')
               }"
               flex id="component-button-{{component.id}}-frost" ng-click="play('frost')">
        <md-icon aria-label="state" style="color: {{ng-open}}activationState === 'frost' ? '#D50000' : '#B71C1C'{{ng-close}}"
                 class="material-icons button-icon-48">{{ng-open}}activationState === 'frost' ? 'star' : 'star_border'{{ng-close}}</md-icon>
        <md-icon aria-label="mode" class="material-icons button-icon-48">ac_unit</md-icon>
    </md-button>
    <md-button class="md-raised md-primary component-button"
               style="border-top-left-radius: 0; border-bottom-left-radius: 0;"
               ng-disabled="isDisabled(component.configuration.domotic, states.macro.c_{{component.id}}.state, processingState)"
               ng-class="{
                   'md-warn': processingState === 'error',
                   'md-hue-1': activationState === 'off' && (states.macro.c_{{component.id}}.state === 'progress' || states.macro.c_{{component.id}}.state === 'delayed')
               }"
               flex id="component-button-{{component.id}}-off" ng-click="play('off')">
        <md-icon aria-label="state" class="material-icons button-icon-48"
                 style="color: #212121;">{{ng-open}}activationState === 'off' ? 'star' : 'star_border'{{ng-close}}</md-icon>
        <md-icon aria-label="mode" class="material-icons button-icon-48">power_settings_new</md-icon>
    </md-button>
</div>
<div style="text-transform: none;text-overflow: ellipsis; white-space: normal; margin-bottom: 0.5rem;">
    {{parsejson component.configuration 'description'}}
</div>

{{#extend "settingsForm"}}
  <md-dialog-content style="min-width:700px;max-width:800px;max-height:810px;">
      <form name="componentForm" layout="column" flex layout-fill>
         TODO !1
      </form>
  </md-dialog-content>
  <md-dialog-actions layout="row">
    <span flex></span>
    <md-button ng-click="cancelConfig()"><md-icon aria-label="block" class="material-icons md-14">block</md-icon> Cancel</md-button>
    <md-button class="md-primary md-raised" ng-click="saveConfig()" md-autofocus><md-icon aria-label="done" class="material-icons md-14">done</md-icon> Save</md-button>
  </md-dialog-actions>
{{/extend}}

<script>
  {{#extend "controllerScript"}}
    // Default values assignment
    $scope.component = $scope.edition.tools.assignDeep({
      configuration:
        {title: 'Heating mode', icon: '', description: 'ON/ECO/FROST/OFF', heating: '', delay: 0, reset_delay: 0, reset_action: 'eco'}
    }, $scope.component);
    if (!$rootScope.states.macro.c_{{component.id}}) {
      $rootScope.states.macro.c_{{component.id}} = {state: 'finished'}
    }

    // to control state
    $scope.processingState = 'waiting' // or 'processing', 'error'
    $scope.activationState = false // or 'on', 'eco', 'frost' or 'off', is the last command sent by component: the last button pressed.

    // TODO !2
  {{/extend}}
</script>
